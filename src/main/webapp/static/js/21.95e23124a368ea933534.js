webpackJsonp([21],{287:function(e,t,a){function o(e){a(888)}var l=a(314)(a(822),a(870),o,"data-v-7197f566",null);e.exports=l.exports},314:function(e,t){e.exports=function(e,t,a,o,l){var i,r=e=e||{},n=typeof e.default;"object"!==n&&"function"!==n||(i=e,r=e.default);var s="function"==typeof r?r.options:r;t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),o&&(s._scopeId=o);var c;if(l?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},s._ssrRegister=c):a&&(c=a),c){var m=s.functional,d=m?s.render:s.beforeCreate;m?s.render=function(e,t){return c.call(t),d(e,t)}:s.beforeCreate=d?[].concat(d,c):[c]}return{esModule:i,exports:r,options:s}}},325:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"pageHelper",props:["currentPage","total"],methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.$emit("sizeChange",e)},handleCurrentChange:function(e){console.log("当前页: "+e),this.$emit("currentChange",e)}}}},326:function(e,t,a){t=e.exports=a(306)(!1),t.push([e.i,"",""])},327:function(e,t,a){function o(e){a(329)}var l=a(314)(a(325),a(328),o,"data-v-41dbbe04",null);e.exports=l.exports},328:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]}},329:function(e,t,a){var o=a(326);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(307)("74cb2d5c",o,!0,{})},822:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(12),l=a.n(o),i=a(327),r=a.n(i),n=a(13),s=a(11);a.n(s);document.title="入库记录",t.default={name:"inputRecordList",components:{pageHelper:r.a,Loading:s.Loading},data:function(){return{total:120,page:1,size:10,importDialogFormVisible:!1,editDialogFormVisible:!1,formLabelWidth:"80px",tableData:[],searchFormData:{channelCode:null,comboCode:null,inputTime:null,beginTime:null,endTime:null},importFormData:{file:null,channelCode:null,comboCode:null,share:null},importRules:{file:[{required:!0,message:"请选择文件",trigger:"change"}],channelCode:[{required:!0,message:"请选择通道",trigger:"change"}],comboCode:[{required:!0,message:"请选择套餐",trigger:"change"}],share:[{required:!0,message:"请选择活动区域",trigger:"change"}]},channels:[{label:"通道1",value:1},{label:"通道2",value:2},{label:"通道3",value:3}],combos:[{label:"套餐1",value:1},{label:"套餐2",value:2},{label:"套餐3",value:3}],actives:[{label:"激活",value:0},{label:"不激活",value:1}],shares:[{label:"共享",value:0},{label:"不共享",value:1}],flowPools:[{label:"流量池1",value:1},{label:"流量池2",value:2}],editForm:{channelName:"",vendor:"",username:"",password:"",key:"",url:""},options:""}},created:function(){},methods:{getData:function(e,t){var o=this;this.page=e||1,this.size=t||10,this.searchFormData.beginTime=a.i(n.getTimeByTimeArray)(this.searchFormData.inputTime,0),this.searchFormData.endTime=a.i(n.getTimeByTimeArray)(this.searchFormData.inputTime,1);var i=this.$loading(this.options);l()({method:"get",url:"/enterStore/query",dataType:"json",params:{page:this.page,size:this.size,beginTime:this.searchFormData.beginTime,endTime:this.searchFormData.endTime}}).then(function(e){0==e.data.code&&(console.log("请求成功"),o.tableData=e.data.list,o.total=e.data.total)},function(e){}),this.$nextTick(function(){console.log("关闭loading"),i.close()})},delClick:function(e){var t=this;console.log("==删除操作==时间"+e.date),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"删除成功!"})}).catch(function(){console.log("取消")})},searchSubmit:function(){this.getData(this.page,this.size)},importCommit:function(e){var t=this;console.log("导入确认",this.searchFormData),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log("打印文件对象",t.$data),console.log(t.file),t.$confirm("是否确定导入?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=new FormData;e.append("file",t.importFormData.file),e.append("channelCode",t.importFormData.channelCode),e.append("comboCode",t.importFormData.comboCode),e.append("share",t.importFormData.share),console.log("formData",e),l.a.post("/card/enter",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){console.log("导入响应res",e),t.$message({type:"success",message:"导入成功!"})})}).catch(function(){console.log("点击取消后执行")})})},editClick:function(e){console.log("==编辑操作==",e),this.editForm.channelName=e.channel,this.editForm.vendor=e.channel,this.editForm.username=e.channel,this.editForm.password=e.channel,this.editForm.key=e.channel,this.editDialogFormVisible=!0},editConfirm:function(e){},editCancel:function(){this.clearEditForm(),this.editDialogFormVisible=!1},clearEditForm:function(){this.editForm={channelName:"",vendor:"",username:"",password:"",key:"",url:""}},handleSizeChange:function(e){this.getData(this.page,e)},handleCurrentChange:function(e){this.getData(e,this.size)},importDialogCloseCall:function(){this.$refs[formName].resetFields("ruleForm"),this.file=null,this.importDialogFormVisible=!1}},mounted:function(){this.options={text:"加载中...",background:"rgba(0,0,0,0,1)",target:document.getElementById("inputRecordList")},this.getData()}}},848:function(e,t,a){t=e.exports=a(306)(!1),t.push([e.i,".express-ctr-item[data-v-7197f566]{margin-top:12px}.express-ctr-item .express-ctr-label[data-v-7197f566]{display:inline-block;width:100px;text-align:right;line-height:32px}.test[data-v-7197f566]{width:100px}.file-btn[data-v-7197f566]{background-color:gray;width:200px}",""])},870:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchFormData}},[a("el-form-item",{attrs:{label:"通道"}},[a("el-select",{attrs:{placeholder:"通道名称",size:"mini"},model:{value:e.searchFormData.channelCode,callback:function(t){e.$set(e.searchFormData,"channelCode",t)},expression:"searchFormData.channelCode"}},e._l(e.channels,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"套餐"}},[a("el-select",{attrs:{placeholder:"套餐名称",size:"mini"},model:{value:e.searchFormData.comboCode,callback:function(t){e.$set(e.searchFormData,"comboCode",t)},expression:"searchFormData.comboCode"}},e._l(e.combos,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:e.searchFormData.inputTime,callback:function(t){e.$set(e.searchFormData,"inputTime",t)},expression:"searchFormData.inputTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){e.importDialogFormVisible=!0}}},[e._v("导入")])],1)],1)],1),e._v(" "),a("el-table",{attrs:{data:e.tableData,border:"",height:"500px","max-height":"500px",id:"inputRecordList"}},[a("el-table-column",{attrs:{fixed:"",prop:"beginId",label:"起始id",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endId",label:"结束id",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cardNum",label:"卡数量",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"通道",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"comboName",label:"套餐",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"导入时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.editClick(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.delClick(t.row)}}},[e._v("删除\n                ")])]}}])})],1),e._v(" "),a("div",[a("pageHelper",{staticClass:"my_pagenation",attrs:{"current-page":e.page,total:e.total},on:{sizeChange:e.handleSizeChange,currentChange:e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editDialogFormVisible},on:{"update:visible":function(t){e.editDialogFormVisible=t}}},[a("el-form",{attrs:{model:e.editForm}},[a("el-form-item",{attrs:{label:"通道名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.channelName,callback:function(t){e.$set(e.editForm,"channelName",t)},expression:"editForm.channelName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"运营商","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.vendor,callback:function(t){e.$set(e.editForm,"vendor",t)},expression:"editForm.vendor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.password,callback:function(t){e.$set(e.editForm,"password",t)},expression:"editForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"key","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.key,callback:function(t){e.$set(e.editForm,"key",t)},expression:"editForm.key"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接口地址","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"接口地址"},model:{value:e.editForm.url,callback:function(t){e.$set(e.editForm,"url",t)},expression:"editForm.url"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.editCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editConfirm}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"表单导入",visible:e.importDialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.importDialogFormVisible=t},close:e.importDialogCloseCall}},[a("el-form",{ref:"ruleForm",attrs:{model:e.importFormData,rules:e.importRules}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,prop:"file"}},[a("el-button",{attrs:{type:"success"},on:{click:function(t){e.$refs.file.click()}}},[e._v(e._s(e.importFormData.file?"重新选择":"选择文件")+"\n                ")]),e._v("\n                "+e._s(e.importFormData.file?e.importFormData.file.name:"")+"\n                "),a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){e.importFormData.file=t.target.files[0]}}})],1),e._v(" "),a("br"),e._v(" "),a("el-form-item",{attrs:{label:"通道","label-width":e.formLabelWidth,prop:"channel"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.importFormData.channelCode,callback:function(t){e.$set(e.importFormData,"channelCode",t)},expression:"importFormData.channelCode"}},e._l(e.channels,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"套餐","label-width":e.formLabelWidth,prop:"combo"}},[a("el-select",{staticClass:"test",attrs:{placeholder:"请选择"},model:{value:e.importFormData.comboCode,callback:function(t){e.$set(e.importFormData,"comboCode",t)},expression:"importFormData.comboCode"}},e._l(e.combos,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否共享","label-width":e.formLabelWidth,prop:"isShare"}},[a("el-select",{staticClass:"test",attrs:{placeholder:"请选择"},model:{value:e.importFormData.share,callback:function(t){e.$set(e.importFormData,"share",t)},expression:"importFormData.share"}},e._l(e.shares,function(e){return a("el-option",{attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.importDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.importCommit("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},888:function(e,t,a){var o=a(848);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(307)("d8f12d2c",o,!0,{})}});